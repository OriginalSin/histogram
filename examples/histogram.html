<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="../thirdparty/emage.js"></script>
    </head>
    <body style="margin:0px">
        <script type="text/javascript">
            var prefix = "file_upload/";
            var arr = [
                'image.jpg'
                ,'t1.jpg'
                ,'t2.jpg'
            ];
            
            var histogram = new emage.Histogram();
            histogram.downSample = 1/8;
            arr.map(function(src) {
                var img = new Image(),
                    name = "histogram_" + src;

                //img.crossOrigin = 'anonymous';
                img.onload = function(){
                    console.profile(name);
                    histogram.update(img);
                    console.profileEnd(name);
                    console.log(name + ": ", JSON.parse(JSON.stringify(histogram.channels)));
                }
                img.src = prefix + src;
            });
        </script>
    </body>
</html>